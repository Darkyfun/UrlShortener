services:
  shortener:
    image: shortener
    container_name: shortener
    networks:
      frontend:
        ipv4_address: 192.168.10.4
      shortener-network:
    environment:
      - SHORTENER_CONFIG_PATH=/bin/conf.yaml
    depends_on:
      - cache
      - db
  cache:
    image: redis:alpine
    container_name: shortener-redis
    networks:
      - shortener-network
  db:
    image: postgres
    container_name: shortener-postgres
    networks:
      - shortener-network
    volumes:
      - postgre_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=123

networks:
  frontend:
    external: true
  shortener-network:

volumes:
  postgre_data: